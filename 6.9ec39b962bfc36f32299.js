(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"/2RN":function(e,n,t){"use strict";t.r(n),t.d(n,"DashboardModule",(function(){return h}));var o=t("Valr"),i=t("QJY3"),c=t("DUip"),r=t("OlR4"),s=t("C7T5"),u=t.n(s),a=t("TYT/"),b=t("XSm8"),p=function(e){return["coupon",e]};function l(e,n){if(1&e){var t=a.Sb();a.Rb(0,"div",13),a.Rb(1,"div",5),a.Rb(2,"div",6),a.Nb(3,"img",14),a.Rb(4,"h5",7),a.yc(5),a.Qb(),a.Rb(6,"P"),a.yc(7,"Exp. Date: 2020-12-31 00:00"),a.Qb(),a.Rb(8,"P"),a.yc(9,"Used: "),a.Rb(10,"span",15),a.yc(11),a.Qb(),a.yc(12," / "),a.Rb(13,"span",16),a.yc(14),a.Qb(),a.Qb(),a.Nb(15,"hr"),a.Rb(16,"div",17),a.Rb(17,"div",18),a.dc("click",(function(e){return a.qc(t),e.stopPropagation()})),a.Rb(18,"input",19),a.dc("ngModelChange",(function(){a.qc(t);var e=n.index;return a.fc(2).publish(e)})),a.Qb(),a.Rb(19,"label",20),a.yc(20,"Publish"),a.Qb(),a.Qb(),a.Rb(21,"button",21),a.dc("click",(function(){a.qc(t);var e=n.index;return a.fc(2).delete(e)})),a.yc(22,"Delete"),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb()}if(2&e){var o=n.$implicit;a.ic("routerLink",a.lc(6,p,n.index)),a.zb(3),a.ic("src",o.image||"assets/placeholder.jpg",a.rc),a.zb(2),a.zc(o.couponTitle),a.zb(6),a.zc(o.used),a.zb(3),a.zc(o.total),a.zb(4),a.ic("ngModel",o.published)}}function d(e,n){if(1&e&&(a.Rb(0,"div",1),a.wc(1,l,23,8,"div",12),a.Qb()),2&e){var t=a.fc();a.zb(1),a.ic("ngForOf",t.coupons)}}var m=[{path:"",component:function(){function e(e,n){this.ngxCsvParser=e,this.commmonService=n,this.currentCouponImage={name:"",base64:""},this.currentCsvFileName="",this.coupons=[]}return e.prototype.ngOnInit=function(){this.commmonService.getCoupons(),this.coupons=this.commmonService.coupons},e.prototype.fileChangeListener=function(e){var n=this,t=e.target.files;this.currentCsvFileName=t[0].name,this.ngxCsvParser.parse(t[0],{header:!0,delimiter:","}).pipe().subscribe((function(e){n.currentCsvRecords=e}),(function(e){}))},e.prototype.addCoupon=function(){var e={couponTitle:this.currentCsvFileName+"-"+Math.random().toFixed(2),coupon:this.currentCsvRecords,published:!0,total:this.currentCsvRecords.filter((function(e){return"Not Used"===e["Coupon Status"]})).length,used:this.currentCsvRecords.filter((function(e){return"Used"===e["Coupon Status"]})).length,image:"data:image/png;base64,"+this.currentCouponImage.base64};this.commmonService.pushCoupon(e),this.currentCouponImage={name:"",base64:""},this.currentCsvFileName="",this.currentCsvRecords=[]},e.prototype.setCurrentCouponImage=function(e){var n=this;u()(e).then((function(e){n.currentCouponImage=e}))},e.prototype.publish=function(e){this.coupons[e].published=!this.coupons[e].published,this.commmonService.updateCoupon(this.coupons[e],e),this.commmonService.couponChanged.next()},e.prototype.delete=function(e){this.coupons.splice(e,1),this.commmonService.updateCoupons(this.coupons)},e.\u0275fac=function(n){return new(n||e)(a.Mb(b.a),a.Mb(r.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-dashboard"]],decls:23,vars:3,consts:[[1,"container-fluid","my-4"],[1,"row"],[1,"col-md-8"],["class","row",4,"ngIf"],[1,"col-md-4"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"custom-file","mb-3"],["type","file","id","customFile",1,"custom-file-input",3,"change"],["for","customFile",1,"custom-file-label"],[1,"btn","btn-primary",3,"click"],["class","col-md-4",3,"routerLink",4,"ngFor","ngForOf"],[1,"col-md-4",3,"routerLink"],[1,"img-fluid","mb-2",3,"src"],["id","UsedC"],["id","totalRow"],[1,"d-flex","justify-content-between"],[1,"custom-control","custom-switch","mt-1",3,"click"],["type","checkbox","id","customSwitch1",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","customSwitch1",1,"custom-control-label"],[1,"btn","btn-danger","btn-sm",3,"click"]],template:function(e,n){1&e&&(a.Rb(0,"div",0),a.Rb(1,"div",1),a.Rb(2,"div",2),a.wc(3,d,2,1,"div",3),a.Qb(),a.Rb(4,"div",4),a.Rb(5,"div",5),a.Rb(6,"div",6),a.Rb(7,"h5",7),a.yc(8,"Add New Coupon"),a.Qb(),a.Rb(9,"p"),a.yc(10,"Add Coupon Image"),a.Qb(),a.Rb(11,"div",8),a.Rb(12,"input",9),a.dc("change",(function(e){return n.setCurrentCouponImage(e)})),a.Qb(),a.Rb(13,"label",10),a.yc(14),a.Qb(),a.Qb(),a.Rb(15,"p"),a.yc(16,"Add Coupon CSV File"),a.Qb(),a.Rb(17,"div",8),a.Rb(18,"input",9),a.dc("change",(function(e){return n.fileChangeListener(e)})),a.Qb(),a.Rb(19,"label",10),a.yc(20),a.Qb(),a.Qb(),a.Rb(21,"a",11),a.dc("click",(function(){return n.addCoupon()})),a.yc(22,"Add New Coupons"),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb()),2&e&&(a.zb(3),a.ic("ngIf",n.coupons.length),a.zb(11),a.zc(n.currentCouponImage.name||"Choose Coupon Image"),a.zb(6),a.zc(n.currentCsvFileName||"Choose CSV file"))},directives:[o.k,o.j,c.b,i.a,i.e,i.h],styles:[""]}),e}()}],f=function(){function e(){}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(n){return new(n||e)},imports:[[c.d.forChild(m)],c.d]}),e}(),h=function(){function e(){}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(n){return new(n||e)},imports:[[o.b,f,i.b]]}),e}()},C7T5:function(e,n){e.exports=function(e){return new Promise((n,o)=>{let i=new FileReader,c=e.target.files;if(c.length>1)o(new DOMException("Only one file can be uploaded at a time"));else{i.onerror=()=>{i.abort(),o(new DOMException("Problem parsing input file."))};let e=c[0];i.onload=o=>{const c=new Uint8Array(o.target.result);let r=[];c.map(e=>{r.push(e.toString(16))});const s=r.join("").toUpperCase();let u=i.result.split(",")[1];e.base64=u,e.binaryFileType=t(s),n(e)},i.readAsDataURL(e)}})};const t=e=>{switch(e){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":return"image/jpeg";case"504B0304":return"application/zip";default:return"Unknown filetype"}}}}]);